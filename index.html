<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Domain Specific Language for Layered Grammar of
    Interactive Graphics • virgo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="A Domain Specific Language for Layered Grammar of
    Interactive Graphics">
<meta property="og:description" content="An implementation of a grammar of interactive
    graphics using vega in R.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">virgo</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/virgo.html">Getting Started</a>
</li>
<li>
  <a href="articles/gallery/index.html">Example Gallery</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/transition.html">A guide to virgo for ggplot2 users</a>
    </li>
    <li>
      <a href="articles/selections.html">Using selections to make interactive graphics with virgo</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vegawidget/vegawidget">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="virgo" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#virgo" class="anchor"></a>virgo</h1></div>
<!-- badges: start -->

<p>The <strong>virgo</strong> package enables the creation of interactive graphics for exploratory data analysis. It is an <em>idiomatic and opinionated</em> R interface to the grammar of graphics implemented by <a href="https://vega.github.io/vega-lite/"><strong>Vega-Lite</strong></a> which defines the following elements:</p>
<ul>
<li>aesthetic mappings/encodings via <code><a href="reference/enc.html">enc()</a></code>
</li>
<li>graphical elements like <code><a href="reference/mark_arc.html">mark_point()</a></code>, with the <code>mark_*</code> family of functions</li>
<li>interactive objects, such as brushes (using <code><a href="reference/select_single.html">select_interval()</a></code>) and sliders (using <code><a href="reference/input_slider.html">input_slider()</a></code>), via the <code>select_*</code> and <code>input_*</code> family of functions</li>
<li>interactive calculations, for example mean (using <code><a href="reference/vg_sum.html">vg_mean()</a></code>), via the <code>vg_*</code> family of functions</li>
<li>data transformations on selection objects for rich interactivity, with {dplyr} verbs</li>
<li>plot composition via faceting and concatenation using <code><a href="reference/facet_views.html">facet_views()</a></code>, <code><a href="reference/hconcat.html">hconcat()</a></code> and <code><a href="reference/hconcat.html">vconcat()</a></code>
</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!--
You can install the released version of **virgo** from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("virgo")
```

-->
<p>You can install the development version of <strong>virgo</strong> from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"vegawidget/virgo"</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-started" class="section level2">
<h2 class="hasAnchor">
<a href="#get-started" class="anchor"></a>Get started</h2>
<p>For most graphics using <strong>virgo</strong>, you start off by passing data to the <code><a href="reference/vega.html">vega()</a></code> function, add graphical elements with marks like <code><a href="reference/mark_arc.html">mark_point()</a></code>, and specify variables within a mark using encodings <code><a href="reference/enc.html">enc()</a></code>. You can add more layers by specifying additional marks like <code><a href="reference/mark_arc.html">mark_smooth()</a></code>, or include small multiples with <code><a href="reference/facet_views.html">facet_views()</a></code> or combine plots or add interactive elements with selections.</p>
<p>Let’s see an example, here we show how we can compose a simple scatter plot and gradually build up to a scatter plot with brushing, to a side by side scatter plot.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">virgo</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/">palmerpenguins</a></span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/vega.html">vega</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_arc.html">mark_circle</a></span><span class="op">(</span>
    <span class="fu"><a href="reference/enc.html">enc</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">bill_length_mm</span>, 
      y <span class="op">=</span> <span class="va">bill_depth_mm</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="va">p</span></code></pre></div>
<p><img src="reference/figures/README-basic-scatter-1.png" width="50%"></p>
<p>Interactive elements are generated using selections, for example, we can generate a rectangular brush with <code><a href="reference/select_single.html">select_interval()</a></code> and then highlight points that fall into the brush using <code><a href="reference/encode_if.html">encode_if()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/select_single.html">select_interval</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">p</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/vega.html">vega</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_arc.html">mark_circle</a></span><span class="op">(</span>
    <span class="fu"><a href="reference/enc.html">enc</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">bill_length_mm</span>, 
      y <span class="op">=</span> <span class="va">bill_depth_mm</span>, 
      color <span class="op">=</span> <span class="fu"><a href="reference/encode_if.html">encode_if</a></span><span class="op">(</span><span class="va">selection</span>, <span class="va">species</span>, <span class="st">"black"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="va">p</span></code></pre></div>
<p><img src="reference/figures/readme-circle.png"></p>
<p>Once a selection is created, it can be passed into other marks, in order to perform a filter. Here, we create a chart with two histogram layers, the first will represent the overall distribution of penguin body masses, while the latter will be the distribution conditional on the selection, and will be shown in purple. We also overlay a vertical line to demonstrate the interactive average given the selection.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p_right</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/vega.html">vega</a></span><span class="op">(</span><span class="fu"><a href="reference/enc.html">enc</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_arc.html">mark_histogram</a></span><span class="op">(</span>bin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>maxbins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_arc.html">mark_histogram</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"purple"</span>, bin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>maxbins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,
    selection <span class="op">=</span> <span class="va">selection</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/mark_arc.html">mark_rule</a></span><span class="op">(</span><span class="fu"><a href="reference/enc.html">enc</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="reference/vg_sum.html">vg_mean</a></span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">4</span>,
    selection <span class="op">=</span> <span class="va">selection</span><span class="op">)</span>
<span class="va">p_right</span></code></pre></div>
<p><img src="reference/figures/readme-histogram.png"></p>
<p>By itself, this histogram isn’t too exciting but if we place along side the scatter plot of penguin bill measurements, we can see how the body mass counts change as we brush over the scatter plot. All we have do is simple concatenate the plots horizontally!</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/hconcat.html">hconcat</a></span><span class="op">(</span><span class="va">p</span>, <span class="va">p_right</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/readme-hconcat.png"></p>
<p>From this, we learn that the chinstrap and adelie penguins are generally lighter and are less variable in their body mass compared to gentoo penguins. The gentoo penguins are heavier, but also have a larger range of masses.</p>
</div>
<div id="learning-more" class="section level2">
<h2 class="hasAnchor">
<a href="#learning-more" class="anchor"></a>Learning more</h2>
<ul>
<li><a href="articles/gallery/index.html">Example gallery</a></li>
<li><a href="articles/virgo.html">Using <strong>virgo</strong> to explore Melbourne’s microclimate</a></li>
<li><a href="articles/transition.html">Guide to <strong>virgo</strong> for <strong>ggplot2</strong> users</a></li>
<li><a href="">Composing plot interactions with selections</a></li>
</ul>
</div>
<div id="lifecycle" class="section level2">
<h2 class="hasAnchor">
<a href="#lifecycle" class="anchor"></a>Lifecycle</h2>
<p><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></p>
<p>The <strong>virgo</strong> package is under rapid development and we are still working through our ideas for incorporating interactive graphics into exploratory data analysis. If you have feedback we would love to hear it!</p>
</div>
<div id="related-works" class="section level2">
<h2 class="hasAnchor">
<a href="#related-works" class="anchor"></a>Related works</h2>
<ul>
<li><a href="http://ggvis.rstudio.com">{ggvis}</a></li>
<li><a href="https://github.com/hrbrmstr/vegalite">{vegalite}</a></li>
<li><a href="https://g2r.opifex.org">{g2r}</a></li>
<li><a href="https://davidgohel.github.io/ggiraph/">{ggiraph}</a></li>
</ul>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<ul>
<li>Vega/Vega-Lite developers</li>
<li>Ian Lyttle, Hayley Jepson and Alicia Schep for their foundational work in the <a href="https://vegawidget.github.io/vegawidget/"><strong>vegawidget</strong></a> package</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Earo Wang <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6448-5260" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Stuart Lee <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-1179-8436" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://codecov.io/gh/vegawidget/virgo?branch=master"><img src="https://codecov.io/gh/vegawidget/virgo/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/vegawidget/virgo/actions"><img src="https://github.com/vegawidget/virgo/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Earo Wang, Stuart Lee.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
